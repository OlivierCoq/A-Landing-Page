$(function(){"use strict";QUnit.module("scrollspy plugin"),QUnit.test("should be defined on jquery object",function(i){i.expect(1),i.ok($(document.body).scrollspy,"scrollspy method is defined")}),QUnit.module("scrollspy",{beforeEach:function(){$.fn.bootstrapScrollspy=$.fn.scrollspy.noConflict()},afterEach:function(){$.fn.scrollspy=$.fn.bootstrapScrollspy,delete $.fn.bootstrapScrollspy}}),QUnit.test("should provide no conflict",function(i){i.expect(1),i.strictEqual($.fn.scrollspy,void 0,"scrollspy was set back to undefined (org value)")}),QUnit.test("should return jquery collection containing the element",function(i){i.expect(2);var e=$("<div/>"),t=e.bootstrapScrollspy();i.ok(t instanceof $,"returns jquery collection"),i.strictEqual(t[0],e[0],"collection contains element")}),QUnit.test('should only switch "active" class on current target',function(i){i.expect(1);var e=i.async(),t=$('<div id="root" class="active"><div class="topbar"><div class="topbar-inner"><div class="container" id="ss-target"><ul class="nav"><li><a href="#masthead">Overview</a></li><li><a href="#detail">Detail</a></li></ul></div></div></div><div id="scrollspy-example" style="height: 100px; overflow: auto;"><div style="height: 200px;"><h4 id="masthead">Overview</h4><p style="height: 200px">Ad leggings keytar, brunch id art party dolor labore.</p></div><div style="height: 200px;"><h4 id="detail">Detail</h4><p style="height: 200px">Veniam marfa mustache skateboard, adipisicing fugiat velit pitchfork beard.</p></div></div></div>').appendTo("#qunit-fixture"),l=t.show().find("#scrollspy-example").bootstrapScrollspy({target:"#ss-target"});l.on("scroll.bs.scrollspy",function(){i.ok(t.hasClass("active"),'"active" class still on root node'),e()}),l.scrollTop(350)}),QUnit.test("should correctly select middle navigation option when large offset is used",function(i){i.expect(3);var e=i.async(),t=$('<div id="header" style="height: 500px;"></div><nav id="navigation" class="navbar"><ul class="nav navbar-nav"><li class="active"><a id="one-link" href="#one">One</a></li><li><a id="two-link" href="#two">Two</a></li><li><a id="three-link" href="#three">Three</a></li></ul></nav><div id="content" style="height: 200px; overflow-y: auto;"><div id="one" style="height: 500px;"></div><div id="two" style="height: 300px;"></div><div id="three" style="height: 10px;"></div></div>').appendTo("#qunit-fixture"),l=t.show().filter("#content");l.bootstrapScrollspy({target:"#navigation",offset:l.position().top}),l.on("scroll.bs.scrollspy",function(){i.ok(!t.find("#one-link").parent().hasClass("active"),'"active" class removed from first section'),i.ok(t.find("#two-link").parent().hasClass("active"),'"active" class on middle section'),i.ok(!t.find("#three-link").parent().hasClass("active"),'"active" class not on last section'),e()}),l.scrollTop(550)}),QUnit.test("should add the active class to the correct element",function(i){i.expect(2);$('<nav class="navbar"><ul class="nav"><li id="li-1"><a href="#div-1">div 1</a></li><li id="li-2"><a href="#div-2">div 2</a></li></ul></nav>').appendTo("#qunit-fixture");var e=$('<div class="content" style="overflow: auto; height: 50px"><div id="div-1" style="height: 100px; padding: 0; margin: 0">div 1</div><div id="div-2" style="height: 200px; padding: 0; margin: 0">div 2</div></div>').appendTo("#qunit-fixture").bootstrapScrollspy({offset:0,target:".navbar"}),t=i.async(),l=function(t,l){var n=$.Deferred(),a=Math.ceil(e.scrollTop()+$(l).position().top);return e.one("scroll",function(){i.ok($(t).hasClass("active"),"target:"+l+", element"+t),n.resolve()}),e.scrollTop(a),n.promise()};$.when(l("#li-1","#div-1")).then(function(){return l("#li-2","#div-2")}).then(function(){t()})}),QUnit.test("should add the active class correctly when there are nested elements at 0 scroll offset",function(i){i.expect(6);var e=0,t=i.async();$('<nav id="navigation" class="navbar"><ul class="nav"><li id="li-1"><a href="#div-1">div 1</a><ul><li id="li-2"><a href="#div-2">div 2</a></li></ul></li></ul></nav>').appendTo("#qunit-fixture");var l=$('<div class="content" style="position: absolute; top: 0px; overflow: auto; height: 50px"><div id="div-1" style="padding: 0; margin: 0"><div id="div-2" style="height: 200px; padding: 0; margin: 0">div 2</div></div></div>').appendTo("#qunit-fixture").bootstrapScrollspy({offset:0,target:"#navigation"});!function n(){if(++e>3)return t();l.one("scroll",function(){i.ok($("#li-1").hasClass("active"),'nav item for outer element has "active" class'),i.ok($("#li-2").hasClass("active"),'nav item for inner element has "active" class'),n()}),l.scrollTop(l.scrollTop()+10)}()}),QUnit.test("should clear selection if above the first section",function(i){i.expect(3);var e=i.async();$('<div id="header" style="height: 500px;"></div><nav id="navigation" class="navbar"><ul class="nav navbar-nav"><li class="active"><a id="one-link" href="#one">One</a></li><li><a id="two-link" href="#two">Two</a></li><li><a id="three-link" href="#three">Three</a></li></ul></nav>').appendTo("#qunit-fixture");var t=$('<div id="content" style="height: 200px; overflow-y: auto;"><div id="spacer" style="height: 100px;"/><div id="one" style="height: 100px;"/><div id="two" style="height: 100px;"/><div id="three" style="height: 100px;"/><div id="spacer" style="height: 100px;"/></div>').appendTo("#qunit-fixture");t.bootstrapScrollspy({target:"#navigation",offset:t.position().top}).one("scroll.bs.scrollspy",function(){i.strictEqual($(".active").length,1,'"active" class on only one element present'),i.strictEqual($(".active").has("#two-link").length,1,'"active" class on second section'),t.one("scroll.bs.scrollspy",function(){i.strictEqual($(".active").length,0,"selection cleared"),e()}).scrollTop(0)}).scrollTop(201)}),QUnit.test("should correctly select navigation element on backward scrolling when each target section height is 100%",function(i){i.expect(5);$('<nav class="navbar"><ul class="nav"><li id="li-100-1"><a href="#div-100-1">div 1</a></li><li id="li-100-2"><a href="#div-100-2">div 2</a></li><li id="li-100-3"><a href="#div-100-3">div 3</a></li><li id="li-100-4"><a href="#div-100-4">div 4</a></li><li id="li-100-5"><a href="#div-100-5">div 5</a></li></ul></nav>').appendTo("#qunit-fixture");var e=$('<div class="content" style="position: relative; overflow: auto; height: 100px"><div id="div-100-1" style="position: relative; height: 100%; padding: 0; margin: 0">div 1</div><div id="div-100-2" style="position: relative; height: 100%; padding: 0; margin: 0">div 2</div><div id="div-100-3" style="position: relative; height: 100%; padding: 0; margin: 0">div 3</div><div id="div-100-4" style="position: relative; height: 100%; padding: 0; margin: 0">div 4</div><div id="div-100-5" style="position: relative; height: 100%; padding: 0; margin: 0">div 5</div></div>').appendTo("#qunit-fixture").bootstrapScrollspy({offset:0,target:".navbar"}),t=function(t,l){var n=$.Deferred(),a=Math.ceil(e.scrollTop()+$(l).position().top);return e.one("scroll",function(){i.ok($(t).hasClass("active"),"target:"+l+", element: "+t),n.resolve()}),e.scrollTop(a),n.promise()},l=i.async();$.when(t("#li-100-5","#div-100-5")).then(function(){return t("#li-100-4","#div-100-4")}).then(function(){return t("#li-100-3","#div-100-3")}).then(function(){return t("#li-100-2","#div-100-2")}).then(function(){return t("#li-100-1","#div-100-1")}).then(function(){l()})})});